<!-- {{personen | json}} -->

<mat-slide-toggle (change)="resetValidations()" [disabled]="editmode" [(ngModel)]="ausweis">Ausweis</mat-slide-toggle>

<form class="example-form">
  <div class="rowfx">
    <div class="colfx">
      <mat-form-field>
        <mat-label>Name</mat-label>
        <input matInput type="text" name="name" [(ngModel)]="currentPerson.name" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Nachname</mat-label>
        <input matInput type="text" name="surname" [(ngModel)]="currentPerson.surname" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Geschlecht</mat-label>
        <input matInput type="text" name="gender" [(ngModel)]="currentPerson.gender" required>
      </mat-form-field>

      <!-- copy datepicker -->
      <mat-form-field>
        <mat-label>Gebutstag</mat-label>
        <input matInput type="text" name="birthday" [(ngModel)]="currentPerson.birthday" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Geburtsland</mat-label>
        <input matInput type="text" name="birthplace" [(ngModel)]="currentPerson.birthplace" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Gebutsgemeinde</mat-label>
        <input matInput type="text" name="birthplaceIt" [(ngModel)]="currentPerson.birthplaceIt" required>
      </mat-form-field>
    </div>

    <div class="colfx">
      <mat-form-field>
        <mat-label>Wohngemeinde</mat-label>
        <input matInput type="text" name="location" [(ngModel)]="currentPerson.location" required>
      </mat-form-field>

      <!-- make number and restrict maybe -->
      <mat-form-field>
        <mat-label>Telefon</mat-label>
        <input matInput type="text" name="tel" [(ngModel)]="currentPerson.tel" required>
      </mat-form-field>

      <!-- mail checers? -->
      <mat-form-field>
        <mat-label>Mail</mat-label>
        <input matInput type="text" name="mail" [(ngModel)]="currentPerson.mail" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Adresse</mat-label>
        <input matInput type="text" name="address" [(ngModel)]="currentPerson.address" required>
      </mat-form-field>

      <!-- number und max 5 chars -->
      <mat-form-field>
        <mat-label>PLZ</mat-label>
        <input matInput type="text" name="plz" [(ngModel)]="currentPerson.plz" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Place</mat-label>
        <input matInput type="text" name="place" [(ngModel)]="currentPerson.place" required>
      </mat-form-field>
    </div>

    <div *ngIf="ausweis" class="colfx">
      <mat-form-field>
        <mat-label>Ausweisnummer</mat-label>
        <input matInput type="text" name="nr" [(ngModel)]="currentPerson.idcard.nr" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Ausstellungsland</mat-label>
        <input matInput type="text" name="land" [(ngModel)]="currentPerson.idcard.country" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Ausweistyp</mat-label>
        <mat-select name="type" [(ngModel)]="currentPerson.idcard.type" required>
          <mat-option *ngFor="let t of austypes" [value]="t">{{t}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <button type="submit" (click)="addPerson()" mat-raised-button color="accent">{{editmode ? 'Save' : 'Add'}}</button>
</form>

<!-- {{currentPerson | json}} -->

<table align="center">
  <tr *ngFor="let p of personen | keyvalue">
    <td>{{p.value.name}} {{p.value.surname}}</td>
    <td><button (click)="editPerson(p.key)" mat-stroked-button color="accent">Edit</button></td>
    <td><button (click)="removePerson(p.key)" mat-stroked-button color="accent" *ngIf="!editmode">Delete</button></td>
  </tr>
</table>